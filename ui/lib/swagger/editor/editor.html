<form class="swagger-editor">

  <!-- Resource basic information -->

  <div class="form-group">
    <label>Resource path</label>
    <input type="text" class="form-control" ng-model="doc.resourcePath">
  </div>

  <div class="form-group">
    <label>Produces</label>
    <label class="form-control" ng-repeat="type in enums.contentTypes">
      <input type="checkbox" ng-checked="doc.produces && doc.produces.indexOf(type) != -1" ng-click="toggleCheck('produces', type)">
      {{type}}
    </label>
  </div>


  <div class="form-group">
    <label>Consumes</label>
    <label class="form-control" ng-repeat="type in enums.contentTypes">
      <input type="checkbox" ng-checked="doc.consumes && doc.consumes.indexOf(type) != -1" ng-click="toggleCheck('consumes', type)">
      {{type}}
    </label>
  </div>

  <!-- Resource api list -->

  <div class="form-group">
    <label>APIs</label>
    <button type="button" class="btn btn-default pull-right" ng-click="addApi(doc)"> Add </button>
    <div class="panel panel-default" ng-repeat="api in doc.apis">
      
      <div class="panel-heading" ng-click="api.$$viewShow = !api.$$viewShow">
        <span class="fa fa-chevron-{{ api.$$viewShow ? 'up' : 'down' }}"> </span>
        <a href="">{{ api.path }}</a>
        <button type="button" class="pull-right" ng-click="deleteApi(doc, $index)">Delete</button>
      </div>

      <div class="panel-body" ng-show="api.$$viewShow">
        
        <div class="form-group">
          <label>Path</label>
          <input type="text" class="form-control" ng-model="api.path">
        </div>

        <div class="form-group">
          <label> Description </label>
          <input type="text" class="form-control" ng-model="api.description">
        </div>

        <div class="form-group">
          <div ng-show="!operationEdit">
            <label>Operations</label>
            <button type="button" class="btn btn-default pull-right" ng-click="addOperation(api)"> Add </button>
          </div>

          <div ng-show="operationEdit">
            <label>Edit Operation - {{ operationEdit.nickname }} </label>
            <button type="button" class="btn btn-default pull-right" ng-click="cancelEditOperation()">Back to list</button>
          </div>

          <div class="panel-body" 
            ng-show="!operationEdit"
            ng-include="'editor/operations-list.html'">
          </div>

          <div class="panel-body" 
            ng-show="operationEdit"
            ng-include="'editor/operation-editor.html'">
          </div>

        </div>
      </div>
    </div>
  </div>  

  <!-- Resource model list -->
  <div class="form-group">
    <label>Models</label>
    <button type="button" class="btn btn-default pull-right" ng-click="addModel(doc)"> Add </button>
    <div class="panel panel-default" ng-repeat="(modelName, model) in doc.models">
      
      <div class="panel-heading" ng-click="model.$$viewShow = !model.$$viewShow">
        <span class="fa fa-chevron-{{ model.$$viewShow ? 'up' : 'down' }}"> </span>
        <a href="">{{ modelName }}</a>
        <button type="button" class="pull-right" ng-click="deleteModel(doc, model)">Delete</button>
      </div>

      <div class="panel-body" ng-show="model.$$viewShow">
        
        <div class="form-group">
          <label>id</label>
          <input type="text" 
            class="form-control" 
            ng-model="model.id"
            ng-model-on-blur="changeObjectName(model.id, modelName, doc.models)">
        </div>

        <div class="form-group">
          <div>
            <label>Properties</label>
            <button type="button" class="btn btn-default pull-right" ng-click="addModelProp(model)"> Add </button>
          </div>

          <table class="table table-hover">
            <tr>
              <th></th>
              <th>Name</th>
              <th>Datatype</th>
              <th>Description</th>
              <th>Items Object</th>
            </tr>

            <!-- Since property doesn't have id property we will create one which will help us to change property name -->
            <tr ng-repeat="(propertyName, property) in model.properties" ng-init="property.$$id = propertyName">
              <td><button type="button" ng-click="deleteModelProp(property, model)"> Delete </button></td>
              <td> 
                <input type="text" 
                  class="form-control" 
                  ng-model="property.$$id"
                  ng-model-on-blur="changeObjectName(property.$$id, propertyName, model.properties)"> 
              </td>
              <td ng-init="setDatatype(property)">
                <select ng-model="property.$$datatype" class="form-control" ng-options="key as key for (key, value) in typeConstants" ng-change="datatypeChange(property)"></select> 
              </td>
              <td> 
                <input type="text" class="form-control" ng-model="property.description"> 
              </td>
              <td> 
                <button type="button" class="btn btn-default" ng-show="property.type === 'Array'" modal="editor/items-object.html"> 
                  edit 
                </button>
              </td>
            </tr>

          </table>

        </div>

        <div class="form-group">
          <label> SubTypes </label>
          <select class="form-control" ng-model="model.subTypes" multiple ng-options="id for id in getSubTypeChoices(doc, model)"></select>
        </div>

        <div class="form-group" ng-show="showDiscriminator(doc, model)">
          <label> Discriminator </label>
          <select class="form-control" ng-model="model.discriminator" ng-options="value for value in propertyConstants"></select>
        </div> 
      </div>
 
    </div>
  </div>

  <!-- Authorization list -->
  <div class="form-group">
    <label>Authorizations</label>
    <button type="button" class="btn btn-default pull-right" ng-click="addAuthorization(doc)"> Add </button>
    <div class="panel panel-default" ng-repeat="(authorizationName, authorization) in doc.authorizations">
      
      <div class="panel-heading" ng-click="authorization.$$viewShow = !authorization.$$viewShow">
        <span class="fa fa-chevron-{{ authorization.$$viewShow ? 'up' : 'down' }}"> </span>
        <a href="">{{ authorizationName }}</a>
        <button type="button" class="pull-right" ng-click="deleteAuthorization(doc, authorizationName)">Delete</button>
      </div>

      <div class="panel-body" ng-show="authorization.$$viewShow">
        
        <div class="form-group">
          <label>id</label>
          <input type="text" class="form-control" ng-model="authorizationName">
        </div>

        <div class="form-group">
          <div>
            <label>Properties</label>
            <button type="button" class="btn btn-default pull-right" ng-click="addAuthorizationProp(doc, authorizationName)"> Add </button>
          </div>
          
          <table class="table table-hover">
            <tr>
              <th></th>
              <th>Scope</th>
              <th>Description</th>
            </tr>
            <tr ng-repeat="authorizationValue in authorization">
              <td><button type="button" ng-click="deleteAuthorizationProp(doc, authorizationName, $index)"> Delete </button></td>
              <td> 
                <input type="text" class="form-control" ng-model="authorizationValue.scope">
              </td>
              <td>
                <input type="text" class="form-control" ng-model="authorizationValue.description">
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>

</form>
